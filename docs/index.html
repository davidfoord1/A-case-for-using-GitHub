<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>A case for using GitHub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./open_code.html" rel="next">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Why you should be using GitHub</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">A case for using GitHub</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Why you should be using GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./open_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A case for Open Code</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-you-should-be-using-github" id="toc-why-you-should-be-using-github" class="nav-link active" data-scroll-target="#why-you-should-be-using-github">Why you should be using GitHub</a>
  <ul class="collapse">
  <li><a href="#what-is-github-anyway" id="toc-what-is-github-anyway" class="nav-link" data-scroll-target="#what-is-github-anyway">What is GitHub, anyway?</a>
  <ul class="collapse">
  <li><a href="#that-sounds-like-a-lot-of-extra-steps-just-to-save-my-work" id="toc-that-sounds-like-a-lot-of-extra-steps-just-to-save-my-work" class="nav-link" data-scroll-target="#that-sounds-like-a-lot-of-extra-steps-just-to-save-my-work">That sounds like a lot of extra steps just to save my work‚Ä¶</a></li>
  <li><a href="#github-for-reproducible-analytical-pipelines-rap" id="toc-github-for-reproducible-analytical-pipelines-rap" class="nav-link" data-scroll-target="#github-for-reproducible-analytical-pipelines-rap">GitHub for Reproducible Analytical Pipelines (RAP)</a></li>
  </ul></li>
  <li><a href="#thats-great-in-theory-but-what-its-like-in-practice" id="toc-thats-great-in-theory-but-what-its-like-in-practice" class="nav-link" data-scroll-target="#thats-great-in-theory-but-what-its-like-in-practice">That‚Äôs great in theory, but what it‚Äôs like in practice?</a>
  <ul class="collapse">
  <li><a href="#getting-to-grips-with-the-tools" id="toc-getting-to-grips-with-the-tools" class="nav-link" data-scroll-target="#getting-to-grips-with-the-tools">Getting to grips with the tools</a></li>
  </ul></li>
  <li><a href="#the-drive-and-support-in-government-and-the-nhs" id="toc-the-drive-and-support-in-government-and-the-nhs" class="nav-link" data-scroll-target="#the-drive-and-support-in-government-and-the-nhs">The drive and support in government and the NHS</a>
  <ul class="collapse">
  <li><a href="#github-and-the-nhs-so-far" id="toc-github-and-the-nhs-so-far" class="nav-link" data-scroll-target="#github-and-the-nhs-so-far">GitHub and the NHS so far</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A case for using GitHub</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="why-you-should-be-using-github" class="level1 unnumbered">
<h1 class="unnumbered">Why you should be using GitHub</h1>
<p>A(nother) case for using GitHub for data analysis projects, from the perspective of an NHS England data analyst. My team started to transition projects on to GitHub last year, and this is why I‚Äôm glad we did.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Goal
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use a service like GitHub to share what you‚Äôve done and how you‚Äôve done it, so that you, your colleagues and others can repeat the process. Share your code and documentation, <em>not the data</em> or even the results (as they of course may be sensitive).</p>
</div>
</div>
<section id="what-is-github-anyway" class="level2">
<h2 class="anchored" data-anchor-id="what-is-github-anyway">What is GitHub, anyway?</h2>
<p><a href="https://github.com/">GitHub</a> is a suite of products centered around the <strong>version control system</strong> <a href="https://www.bing.com/ck/a?!&amp;&amp;p=d931a2ebfd59a00eJmltdHM9MTcwMTgyMDgwMCZpZ3VpZD0xYTFjOTJhOC00Y2I2LTZkZDctMGY1ZS04MDZkNGQwZDZjNzYmaW5zaWQ9NTUyNQ&amp;ptn=3&amp;ver=2&amp;hsh=3&amp;fclid=1a1c92a8-4cb6-6dd7-0f5e-806d4d0d6c76&amp;psq=git&amp;u=a1aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZHM&amp;ntb=1">Git</a>. It offers:</p>
<ul>
<li><p><strong>A place to store and share projects</strong>, in repositories with complete control over who has access. It‚Äôs easy to download a copy of a project, make changes and upload a revision. It‚Äôs a shared source-of-truth on the cloud.</p></li>
<li><p><strong>A record of changes made to the repository</strong>, including who made them and when; great for recovery, audits or just understanding how the project changed over time. You name and describe changes so that it‚Äôs easy to understand what‚Äôs been done.</p></li>
<li><p><strong>Multiple branches of one project being worked on in parallel</strong>. You can work safely and separately on features and combine them. By having a distinct final/publishing branch (usually <code>main</code>), you can protect the quality and completeness of the output product.</p></li>
<li><p><strong>Peer review in your regular workflow</strong>. Pull Requests and Code Reviews are key features. When you‚Äôre happy with a change you‚Äôve made in a branch, you can make a request for your work to be pulled/merged into the <code>main</code> branch. This can then be reviewed by someone, who can add comments, request changes or approve and merge. This is really valuable, because it adds a natural step for feedback and quality assurance into the process.</p></li>
</ul>
<p>All of that is available for <strong>FREE</strong>, and that‚Äôs not everything<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, but hopefully it is enough to pique your interest.</p>
<section id="that-sounds-like-a-lot-of-extra-steps-just-to-save-my-work" class="level3">
<h3 class="anchored" data-anchor-id="that-sounds-like-a-lot-of-extra-steps-just-to-save-my-work">That sounds like a lot of extra steps just to save my work‚Ä¶</h3>
<p>Well, yes, it is. It‚Äôs saving, but more deliberate, with more quality assurance built-in, records for recovery and audit, proper support for multiple branches of work. It is a longer process; it‚Äôs a more thoughtful process; it‚Äôs a better process. In fact, it‚Äôs not a longer process, it takes more time up front but saves a lot over the mid-to-long-term. I don‚Äôt think I can stress enough how beneficial the extra steps are, particularly in making your work reproducible.</p>
</section>
<section id="github-for-reproducible-analytical-pipelines-rap" class="level3">
<h3 class="anchored" data-anchor-id="github-for-reproducible-analytical-pipelines-rap">GitHub for Reproducible Analytical Pipelines (RAP)</h3>
<p>As a summary of <a href="https://nhsdigital.github.io/rap-community-of-practice/introduction_to_RAP/why_RAP_is_important/">why reproducible pipelines are important</a>: the more manual steps like copy-pasting in a process there are, the more time it will take to complete, the more risk there will be for error, and the less scalable it will be for extending and repeating the process. It‚Äôs good to automate as much as possible, and products like GitHub go hand-in-hand with tackling these issues:</p>
<p>From the NHS Digital <a href="https://nhsdigital.github.io/rap-community-of-practice/introduction_to_RAP/levels_of_RAP/">levels of RAP framework</a>, which sets out a list of requirements for making a good pipeline, look at the <em>baseline</em> (bronze) points:</p>
<blockquote class="blockquote">
<ul>
<li><p>Code is version controlled (see <a href="https://nhsdigital.github.io/rap-community-of-practice/training_resources/git/introduction-to-git/">Git basics</a> and <a href="https://nhsdigital.github.io/rap-community-of-practice/training_resources/git/using-git-collaboratively/">using Git collaboratively</a> guides).</p></li>
<li><p>Code has been <a href="https://nhsdigital.github.io/rap-community-of-practice/implementing_RAP/code-review/">peer reviewed</a>.</p></li>
<li><p>Code is <a href="https://nhsdigital.github.io/rap-community-of-practice/implementing_RAP/how-to-publish-your-code-in-the-open/">published in the open</a> and linked to &amp; from accompanying publication (if relevant).</p></li>
<li><p>Data produced by code in an open-source language (e.g., Python, R, SQL).</p></li>
<li><p>Repository includes a README.md file (or equivalent) that clearly details steps a user must follow to reproduce the code.</p></li>
</ul>
</blockquote>
<p><strong>GitHub directly implements or supports all of these</strong>. As you should know by now, it implements version control, peer review and publishing code publicly. It supports working with a broad variety of languages as well as encouraging READMEs by default, presenting them as guides on repository home pages.</p>
</section>
</section>
<section id="thats-great-in-theory-but-what-its-like-in-practice" class="level2">
<h2 class="anchored" data-anchor-id="thats-great-in-theory-but-what-its-like-in-practice">That‚Äôs great in theory, but what it‚Äôs like in practice?</h2>
<p>Like I said, I‚Äôm really glad the team I‚Äôm in started making this move -</p>
<ul>
<li><p>Now we can collaborate much more safely, in ways that were not possible with our previous setup using OneDrive/SharePoint. It‚Äôs easy to work on something in your own branch without worrying about messing the real thing up, and then it shows you the exact differences when you want to combine on them.</p></li>
<li><p>Introducing <strong>code review has been a boon for learning</strong> in the team. We‚Äôre not just getting things done well enough to work. We‚Äôre getting feedback, we‚Äôre improving, we‚Äôre making things more maintainable. This comes from both getting your code reviewed and from doing the reviewing.</p></li>
<li><p>Code review has managed to catch a few mistakes before they got moved into building a project.</p></li>
<li><p>In a case where a change didn‚Äôt work in practice, we were able to revert it.</p></li>
<li><p>It has been quick and easy to get code running for different people and on different locations like remote desktops.</p></li>
</ul>
<p>That being said, although the differences are clearly set out, conflicts can arise and resolving them scales in difficulty with the complexity of the changes. So, it‚Äôs still generally recommended to have only one branch work on one file at a time.</p>
<section id="getting-to-grips-with-the-tools" class="level3">
<h3 class="anchored" data-anchor-id="getting-to-grips-with-the-tools">Getting to grips with the tools</h3>
<p>There was a bit of learning and setting up to do to get started, but plenty of guides on how to do it. There are lots of tools to potentially use, the most friendly being apps like <a href="https://desktop.github.com/">GitHub Desktop</a>, or perhaps the integrated functionality in development environments like <a href="https://code.visualstudio.com/docs/sourcecontrol/intro-to-git" title="Intro to Git in VSCode">VSCode</a>. Best is to just pick one that seems comfortable to you, find the relevant documentation and guidance, and then run with it.</p>
<p>Once you get the hang of if it, there is a fairly simple and consistent rhythm of creating feature branches, making/saving/committing changes to files, pulling from the main branch and pushing to the feature branch, before submitting for review.</p>
<p><strong>It‚Äôs easy to see where changes have been made</strong></p>
<p>When a commit is made the exact changes are recorded, which can be displayed in various ways, usually with a <code>+</code> for added lines and <code>-</code> for removed lines. Being so explicit with the changes is the main reason why merging different changes together is made so easy, because you know exactly what is happening.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/git_additions.PNG" class="img-fluid figure-img" width="600"></p>
<figcaption class="figure-caption">Additions in GitHub Desktop</figcaption>
</figure>
</div>
</section>
</section>
<section id="the-drive-and-support-in-government-and-the-nhs" class="level2">
<h2 class="anchored" data-anchor-id="the-drive-and-support-in-government-and-the-nhs">The drive and support in government and the NHS</h2>
<p>The <a href="https://www.gov.uk/government/publications/better-broader-safer-using-health-data-for-research-and-analysis/better-broader-safer-using-health-data-for-research-and-analysis">Goldacre review</a> goes in to quite some (non-technical) detail on why reproducible pipelines are a great opportunity for improvement in NHS analytical work. It recommends the adoption of RAP practices as the default:</p>
<blockquote class="blockquote">
<p>it is crucial that the core working practices, such as sharing code, are implemented as a norm throughout the system, because of the problems that closed working can create around quality, safety, usability, credibility, and review.</p>
</blockquote>
<p>The review stresses the importance of tools and services like GitHub<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> to meet the minimum requirements of data pipelines being shared openly to anyone for review and re-use with an audit trail using version control.</p>
<p>The same is said in many places, here are some others in additions to the the NHS Digital resources already shared:</p>
<ul>
<li><p>The <a href="https://www.gov.uk/service-manual/technology/making-source-code-open-and-reusable" title="Making source code open and reusable">GOV.UK Service Manual</a> advises making code publicly available in an open internet source code repository.</p></li>
<li><p>The Government Analysis Function‚Äôs best practice guidance includes a <a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/version_control.html#">Guide to Version Control with Git</a> and a <a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/version_control.html">Peer Review Guide</a>.</p></li>
<li><p>The Office of National Statistics <a href="https://datasciencecampus.github.io/coding-in-the-open/" title="ONS Data Science Campus - Coding in the Open">reiterates the NHS Digital position</a>.</p></li>
</ul>
<section id="github-and-the-nhs-so-far" class="level3">
<h3 class="anchored" data-anchor-id="github-and-the-nhs-so-far">GitHub and the NHS so far</h3>
<p>The <a href="https://nhsengland.github.io/open-health-statistics/">Open Source Healthcare Statistics</a> page shows how many public repositories there are from various healthcare organisations. It‚Äôs been growing quickly in recent years! They give links to all the repositories, if you‚Äôre interested in a browse (including <a href="https://github.com/NHSDigital">NHS Digital</a> and <a href="https://github.com/nhsengland">NHS England</a>). Of particular note, I think, among that list are the <strong>communities</strong> building around Open Source for healthcare professionals like the <a href="https://github.com/nhs-r-community">NHS R Community</a> and the <a href="https://github.com/nhs-pycom">NHS Python Community</a><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p><strong>So, do you see the benefits of Open Code?</strong></p>


</section>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>üí° You <em>did</em> notice you‚Äôre at a github.io address, right?<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>üîç GitHub is mentioned <em>39</em> times in the review.<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p>That was a lot of links. Are you clicking any of them? Go check them out - they‚Äôre great! Go for it! Seriously, stop reading what I‚Äôm writing. I‚Äôm getting self-conscious now. Or you can go to the next page, I guess ü§∑‚Äç‚ôÇ<a href="#fnref3" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="./open_code.html" class="pagination-link">
        <span class="nav-page-text">A case for Open Code</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>